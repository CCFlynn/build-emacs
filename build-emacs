#!/bin/sh
set +e

for b in ${*:-bzr pretest release}; do
    b=${b##-}
    b=${b##--}
    eval build_$b=1
done

cd `dirname $0`
. ./notify
[ ${build_bzr}     ] && ./build-emacs-from-bzr
[ ${build_pretest} ] && ./build-emacs-from-ftp ftp://alpha.gnu.org/gnu/emacs/pretest pretest
[ ${build_release} ] && ./build-emacs-from-ftp ftp://ftp.gnu.org/gnu/emacs

# At this point the original script loaded my .bashrc, rsynced the emacs-builds/ directory to my
# high-bandwidth mirror and then my local server (sending growl notifications each time) and then adjusted the
# permissions such that the http daemon could write to the directory (my original site had reddit style thumbs
# up/down voting on each build and votes were stored in the build dir). I've redacted this part because it had
# a lot of server, user and directory names.
